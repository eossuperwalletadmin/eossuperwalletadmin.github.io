webpackJsonp([6],{1669:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return{mainapp:e.mainapp,loading:e.agentlist.loading,agentlist:e.agentlist}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(230),c=a(r),l=n(141),u=a(l),i=n(46),d=a(i),f=n(92),s=a(f),m=n(336),p=a(m),g=n(331),v=a(g),h=n(26),E=a(h),y=n(1),k=a(y),A=n(6),S=a(A),_=n(2),x=a(_),b=n(3),w=a(b);n(337),n(142),n(70),n(143),n(717);var O=n(0),C=a(O),I=n(7),T=(a(I),n(34)),M=n(21),N=n(20),P=a(N),z=n(177),j=n(330),F=n(1678),q=n(90),D=n(1693),H=a(D),J=function(e){function t(e){(0,k.default)(this,t);var n=(0,x.default)(this,(t.__proto__||(0,E.default)(t)).call(this,e));return n.SetloadStatus=function(e){(0,n.props.dispatch)({type:"agentlist/updatedata",payload:{loading:e}})},n.loadAgenter=function(){var e=n.props,t=e.mainapp,a=e.dispatch,o=t.eosAccount;a(o==q.contractname||q.adminname.includes(o)?{type:"agentlist/query",payload:{}}:M.routerRedux.push({pathname:"/mywallettools/error403"}))},n.appoveAgenter=function(e){var t=n.props,a=t.mainapp,o=(t.dispatch,a.scatter),r=a.activeNetwork,c=a.eosAccount,l=a.eosAuthority,u=(0,F.getScatterEosClient)(o,r),i={authorization:[c+"@"+l]};n.SetloadStatus(!0),u.contract(q.contractname).then(function(t){t.approveagent({from:c,agenter:e.agenter},i).then(function(e){(0,j.msgSuccess)(e.transaction_id),n.SetloadStatus(!1),n.loadAgenter()},function(e){n.SetloadStatus(!1),(0,j.msgError)((0,v.default)(e))})})},n.cancelAgenter=function(e){var t=n.props,a=t.mainapp,o=(t.dispatch,a.scatter),r=a.activeNetwork,c=a.eosAccount,l=a.eosAuthority,u={authorization:[c+"@"+l]};(0,F.getScatterEosClient)(o,r).contract(q.contractname).then(function(t){t.cancelagent({from:c,agenter:e.agenter},u).then(function(e){(0,j.msgSuccess)(e.transaction_id),n.loadAgenter()},function(e){console.error(e),(0,j.msgError)((0,v.default)(e)),n.setState({loading:!1})})})},n.removeAgenter=function(e){var t=n.props,a=t.mainapp,o=(t.dispatch,a.scatter),r=a.activeNetwork,c=a.eosAccount,l=a.eosAuthority,u={authorization:[c+"@"+l]};(0,F.getScatterEosClient)(o,r).contract(q.contractname).then(function(t){t.removeagent({agenter:e.agenter},u).then(function(e){(0,j.msgSuccess)(e.transaction_id),n.loadAgenter()},function(e){console.error(e),(0,j.msgError)((0,v.default)(e))})})},n.OnhandleSearch=function(e){n.props.dispatch},n.Ononeactionfun=function(e,t){var a=n.props,o=a.mainapp,r=(a.form,a.dispatch,a.selecteditem,o.scatter,o.activeNetwork,o.eosAccount);o.eosAuthority;if(!o||!o.eosAccount)return void(0,j.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55");if(""==r)return void(0,j.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55");if(r!=q.contractname&&!q.adminname.includes(r))return void(0,j.msgError)(r+" \u4f60\u7684eos\u8d26\u53f7\u6ca1\u6709\u6743\u9650\u64cd\u4f5c");if("cancel"===e)p.default.confirm({title:P.default.get("comm.yesno"),content:P.default.get("comm.cancelyesno")+t.agenter,okText:P.default.get("comm.ok"),cancelText:P.default.get("comm.cancel"),onOk:function(){return n.cancelAgenter(t)}});else if("remove"===e){if(r!=q.contractname)return void(0,j.msgError)(r+" \u4f60\u7684eos\u8d26\u53f7\u6ca1\u6709\u6743\u9650\u5220\u9664");p.default.confirm({title:P.default.get("comm.yesno"),content:P.default.get("comm.deleteyesno")+t.agenter,okText:P.default.get("comm.ok"),cancelText:P.default.get("comm.cancel"),onOk:function(){return n.removeAgenter(t)}})}else"appove"===e&&p.default.confirm({title:P.default.get("comm.yesno"),content:P.default.get("comm.appoveyesno")+t.agenter,okText:P.default.get("comm.ok"),cancelText:P.default.get("comm.cancel"),onOk:function(){return n.appoveAgenter(t)}})},n}return(0,w.default)(t,e),(0,S.default)(t,[{key:"componentWillMount",value:function(){this.loadAgenter()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.agentlist,a=(t.dispatch,n.myitems),o=n.loading,r=[{title:P.default.get("comm.agent"),dataIndex:"agenter",render:function(e,t){return C.default.createElement(O.Fragment,null,C.default.createElement("span",null,e),C.default.createElement("em",null,1==t.isaccepted?C.default.createElement(s.default,{color:"blue"},P.default.get("comm.appoved")):C.default.createElement(s.default,{color:"red"},P.default.get("comm.appoveing"))))}},{title:P.default.get("comm.level"),dataIndex:"agentflag",render:function(e,t){return C.default.createElement("span",null,1==e?C.default.createElement(s.default,{color:"red"},"1"):C.default.createElement(s.default,{color:"blue"},"2"))}},{title:P.default.get("comm.edit"),render:function(t,n){return C.default.createElement("span",null,C.default.createElement(d.default,{onClick:function(){return e.Ononeactionfun("cancel",n)}},P.default.get("comm.cancel")),C.default.createElement(u.default,{type:"vertical"}),C.default.createElement(d.default,{onClick:function(){return e.Ononeactionfun("remove",n)}},P.default.get("comm.delete")),C.default.createElement(u.default,{type:"vertical"}),1==n.agentflag&&0==n.isaccepted?C.default.createElement(d.default,{onClick:function(){return e.Ononeactionfun("appove",n)}},P.default.get("comm.appoveagent")):"")}}];return C.default.createElement(z.MyappPageHeaderLayout,{title:P.default.get("comm.manageagent")},C.default.createElement("div",{className:H.default.TableItems},C.default.createElement(c.default,{rowKey:function(e){return e.agenter},loading:o,pagination:!1,scroll:{x:767},columns:r,dataSource:a})))}}]),t}(O.PureComponent);t.default=(0,T.connect)(o)(J),e.exports=t.default},1678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScatterEosClient=void 0;var a=n(333),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.getScatterEosClient=function(e,t){var n={protocol:t.endpoint.protocol,blockchain:t.network.network,host:t.endpoint.url,port:t.endpoint.port,chainId:t.network.chainId},a={broadcast:!0,sign:!0,chainId:t.network.chainId},r=t.endpoint.protocol;return e.eos(n,o.default,a,r)}},1693:function(e,t){e.exports={TableItems:"TableItems___2bv8F"}}});