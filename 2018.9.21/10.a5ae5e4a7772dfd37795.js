webpackJsonp([10],{1672:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return{mainapp:t.mainapp,salereport:t.salereport}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(336),c=o(r),u=n(331),s=o(u),i=n(26),l=o(i),d=n(1),m=o(d),p=n(6),f=o(p),g=n(2),y=o(g),h=n(3),v=o(h),S=n(46),k=o(S);n(717),n(70);var E=n(0),O=o(E),_=n(7),A=(o(_),n(34)),w=n(21),M=n(20),b=o(M),C=n(177),I=n(330),x=n(1678),B=n(90),T=(k.default.Group,function(t){function e(){var t,n,o,a;(0,m.default)(this,e);for(var r=arguments.length,u=Array(r),i=0;i<r;i++)u[i]=arguments[i];return n=o=(0,y.default)(this,(t=e.__proto__||(0,l.default)(e)).call.apply(t,[this].concat(u))),o.checkadmin=function(){var t=o.props,e=t.mainapp,n=t.dispatch,a=e.eosAccount;a==B.contractname||B.adminname.includes(a)||n(w.routerRedux.push({pathname:"/mywallettools/error403"}))},o.SetloadStatus=function(t){(0,o.props.dispatch)({type:"salereport/updatedata",payload:{updateloading:t}})},o.loadsalereport=function(){(0,o.props.dispatch)({type:"salereport/query",payload:{}})},o.InitByadmin=function(){var t=o.props,e=t.mainapp,n=(t.dispatch,e.scatter),a=e.activeNetwork,r=e.eosAccount,c=e.eosAuthority,u=(0,x.getScatterEosClient)(n,a),i={authorization:[r+"@"+c]};return e&&e.eosAccount?""==r?void(0,I.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55"):r!=B.contractname?void(0,I.msgError)(r+" \u4f60\u7684eos\u8d26\u53f7\u6ca1\u6709\u6743\u9650\u64cd\u4f5c"):(o.SetloadStatus(!0),void u.contract(B.contractname).then(function(t){t.setttsale({mysteps:B.nowsale.steps},i).then(function(t){(0,I.msgSuccess)(t.transaction_id),o.SetloadStatus(!1),o.loadsalereport()},function(t){o.SetloadStatus(!1),(0,I.msgError)((0,s.default)(t))})})):void(0,I.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55")},o.OnInitfun=function(){c.default.confirm({title:b.default.get("comm.yesno"),content:b.default.get("comm.appoveyesno"),okText:b.default.get("comm.ok"),cancelText:b.default.get("comm.cancel"),onOk:function(){return o.InitByadmin()}})},o.StatusByadmin=function(t,e){var n=o.props,a=n.mainapp,r=(n.dispatch,a.scatter),c=a.activeNetwork,u=a.eosAccount,i=a.eosAuthority,l=(0,x.getScatterEosClient)(r,c),d={authorization:[u+"@"+i]};return a&&a.eosAccount?""==u?void(0,I.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55"):u!=B.contractname?void(0,I.msgError)(u+" \u4f60\u7684eos\u8d26\u53f7\u6ca1\u6709\u6743\u9650\u64cd\u4f5c"):(o.SetloadStatus(!0),void l.contract(B.contractname).then(function(n){n.setnowsale({from:u,mysteps:e.mysteps,status:t},d).then(function(t){(0,I.msgSuccess)(t.transaction_id),o.SetloadStatus(!1),o.loadsalereport()},function(t){o.SetloadStatus(!1),(0,I.msgError)((0,s.default)(t))})})):void(0,I.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55")},o.OnOpenClose=function(t,e){c.default.confirm({title:b.default.get("comm.yesno"),content:b.default.get("comm.yesno"),okText:b.default.get("comm.ok"),cancelText:b.default.get("comm.cancel"),onOk:function(){return o.StatusByadmin(t,e)}})},o.ManagebuyByadmin=function(){var t=o.props,e=t.mainapp,n=(t.dispatch,e.scatter),a=e.activeNetwork,r=e.eosAccount,c=e.eosAuthority,u=(0,x.getScatterEosClient)(n,a),i={authorization:[r+"@"+c]};return e&&e.eosAccount?""==r?void(0,I.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55"):r==B.contractname||B.adminname.includes(r)?(o.SetloadStatus(!0),void u.contract(B.contractname).then(function(t){t.prebuymanage({from:r},i).then(function(t){(0,I.msgSuccess)(t.transaction_id),o.SetloadStatus(!1)},function(t){o.SetloadStatus(!1),(0,I.msgError)((0,s.default)(t))})})):void(0,I.msgError)(r+" \u4f60\u7684eos\u8d26\u53f7\u6ca1\u6709\u6743\u9650\u64cd\u4f5c"):void(0,I.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55")},o.OnManagebuy=function(){c.default.confirm({title:b.default.get("comm.yesno"),content:b.default.get("comm.yesno"),okText:b.default.get("comm.ok"),cancelText:b.default.get("comm.cancel"),onOk:function(){return o.ManagebuyByadmin()}})},a=n,(0,y.default)(o,a)}return(0,v.default)(e,t),(0,f.default)(e,[{key:"componentWillMount",value:function(){this.checkadmin()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this.props,e=t.mainapp,n=t.salereport,o=(t.dispatch,e.eosAccount),a=O.default.createElement(E.Fragment,null,O.default.createElement(k.default,{type:"primary",onClick:this.OnManagebuy},"\u7ed3\u8d26"));return O.default.createElement(C.MyappPageHeaderLayout,{title:b.default.get("comm.managesalereport"),action:a},O.default.createElement("div",null,O.default.createElement(C.SaleReport,{salereport:n,OnOpenClose:o==B.contractname?this.OnOpenClose:null,OnSaleInit:o==B.contractname?this.OnInitfun:null})))}}]),e}(E.PureComponent));e.default=(0,A.connect)(a)(T),t.exports=e.default},1678:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getScatterEosClient=void 0;var o=n(333),a=function(t){return t&&t.__esModule?t:{default:t}}(o);e.getScatterEosClient=function(t,e){var n={protocol:e.endpoint.protocol,blockchain:e.network.network,host:e.endpoint.url,port:e.endpoint.port,chainId:e.network.chainId},o={broadcast:!0,sign:!0,chainId:e.network.chainId},r=e.endpoint.protocol;return t.eos(n,a.default,o,r)}}});